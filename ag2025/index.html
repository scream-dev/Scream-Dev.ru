<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>AnarxGrif 2025</title>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  background: linear-gradient(135deg, #1a1a2e 0%, #0f0f1e 100%);
  color: #F3F4F6;
}

.container {
  max-width: 1400px;
  margin: auto;
  padding: 40px 20px;
}

.header {
  text-align: center;
  margin-bottom: 50px;
  padding: 30px;
  background: rgba(239,68,68,0.1);
  border-radius: 16px;
  border: 2px solid rgba(239,68,68,0.3);
}

.header h1 {
  font-size: 48px;
  font-weight: 900;
  background: linear-gradient(135deg,#EF4444,#3B82F6);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  margin: 0;
}

.grid {
  display: grid;
  grid-template-columns: repeat(auto-fit,minmax(500px,1fr));
  gap: 30px;
  margin-bottom: 50px;
}

.card {
  background: rgba(31,41,55,0.6);
  backdrop-filter: blur(10px);
  border-radius: 16px;
  padding: 30px;
}

.stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit,minmax(250px,1fr));
  gap: 20px;
}

.stat {
  padding: 20px;
  border-radius: 12px;
  border: 2px solid rgba(255,255,255,0.15);
}

.top-item {
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:20px;
  margin-bottom:15px;
  border-radius:12px;
  background: rgba(31,41,55,0.5);
  border:2px solid rgba(75,85,99,0.3);
}
</style>
</head>

<body>

<div class="container">

  <div class="header">
    <h1>üìä Discord Analytics</h1>
    <p style="color:#9CA3AF;font-size:18px;">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ AnarxGrif –∑–∞ 2025</p>
  </div>

  <div class="grid">
    <div class="card">
      <h2 style="text-align:center;color:#EF4444;">üî• 2025 –≥–æ–¥</h2>
      <canvas id="chart2025"></canvas>
    </div>

    <div class="card">
      <h2 style="text-align:center;color:#3B82F6;">‚è≥ –í—Å—ë –≤—Ä–µ–º—è</h2>
      <canvas id="chartTotal"></canvas>
    </div>
  </div>

  <div class="card" style="margin-bottom:50px;">
    <h2 style="text-align:center;color:#8B5CF6;">üìà –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
    <div class="stats-grid" id="stats"></div>
  </div>

  <div class="card">
    <h2 style="text-align:center;color:#EF4444;">üèÜ –¢–æ–ø –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ 2025</h2>
    <div id="top"></div>
  </div>

</div>

<script>
const data = [
  { name: '–¢–∏–º—É—Ä', messages2025: 4224, messagesTotal: 14097 },
  { name: '–ú–∞–∫–∞—Ä', messages2025: 4581, messagesTotal: 17170 },
  { name: '–ú–∞—Ç–≤–µ–π', messages2025: 1995, messagesTotal: 5344 },
  { name: '–î–µ–Ω–∏—Å', messages2025: 3166, messagesTotal: 11591 },
  { name: '–ö–æ–ª—è', messages2025: 198, messagesTotal: 688 },
  { name: '–®–∞–º–∏–ª—å', messages2025: 1211, messagesTotal: 1351 },
  { name: '–î–∞–Ω–∏–∏–ª', messages2025: 6, messagesTotal: 54 },
  { name: '–ò–ª—å—Å–∞—Ñ', messages2025: 465, messagesTotal: 1110 }
];

const COLORS = ['#EF4444','#3B82F6','#EC4899','#8B5CF6','#F97316','#06B6D4','#F59E0B','#10B981'];

const total2025 = data.reduce((s,i)=>s+i.messages2025,0);
const totalAll = data.reduce((s,i)=>s+i.messagesTotal,0);
const avg2025 = Math.round(total2025/data.length);
const avgAll = Math.round(totalAll/data.length);

const median2025 = [...data].sort((a,b)=>a.messages2025-b.messages2025)[Math.floor(data.length/2)].messages2025;

const mostActive = [...data].sort((a,b)=>b.messages2025-a.messages2025)[0];
const mostActiveAll = [...data].sort((a,b)=>b.messagesTotal-a.messagesTotal)[0];

new Chart(chart2025, {
  type: 'pie',
  data: {
    labels: data.map(d=>d.name),
    datasets: [{
      data: data.map(d=>d.messages2025),
      backgroundColor: COLORS
    }]
  }
});

new Chart(chartTotal, {
  type: 'pie',
  data: {
    labels: data.map(d=>d.name),
    datasets: [{
      data: data.map(d=>d.messagesTotal),
      backgroundColor: COLORS
    }]
  }
});

const stats = document.getElementById("stats");
[
  ["–í—Å–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏–π 2025", total2025],
  ["–í—Å–µ–≥–æ –∑–∞ –≤—Å—ë –≤—Ä–µ–º—è", totalAll],
  ["–°—Ä–µ–¥–Ω–µ–µ –Ω–∞ —á–µ–ª–æ–≤–µ–∫–∞ (2025)", avg2025],
  ["–°—Ä–µ–¥–Ω–µ–µ –Ω–∞ —á–µ–ª–æ–≤–µ–∫–∞ (–≤—Å–µ–≥–æ)", avgAll],
  ["–ú–µ–¥–∏–∞–Ω–∞ (2025)", median2025],
  ["–°–∞–º—ã–π –∞–∫—Ç–∏–≤–Ω—ã–π (2025)", mostActive.name + " ‚Äî " + mostActive.messages2025],
  ["–°–∞–º—ã–π –∞–∫—Ç–∏–≤–Ω—ã–π (–≤—Å–µ–≥–æ)", mostActiveAll.name + " ‚Äî " + mostActiveAll.messagesTotal],
  ["–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å 2025", ((total2025/totalAll)*100).toFixed(1) + "%"]
].forEach(s=>{
  const d=document.createElement("div");
  d.className="stat";
  d.innerHTML=`<div style="color:#9CA3AF;font-size:14px;">${s[0]}</div><div style="font-size:28px;font-weight:900;">${s[1]}</div>`;
  stats.appendChild(d);
});

const top = document.getElementById("top");
[...data].sort((a,b)=>b.messages2025-a.messages2025).forEach((i,idx)=>{
  const d=document.createElement("div");
  d.className="top-item";
  d.innerHTML=`
    <div><strong>${idx+1}. ${i.name}</strong></div>
    <div>${i.messages2025.toLocaleString()} —Å–æ–æ–±—â–µ–Ω–∏–π</div>
  `;
  top.appendChild(d);
});
</script>

</body>
</html>
